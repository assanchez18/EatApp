<html lang="es">
<head th:insert="base/head">
</head>
<body>
	<div th:insert="base/navbar.html"></div>
	<div class="page">
		<main role="main"
			class="main container col-xl col-lg col-md col-sm col-">
			<div class="starter-template">
				<h2 class="intro">Estas son los pedidos que est√°n en proceso:</h2>
				<table th:if="${orders}" id="dataTable"
					class="table table-striped display">
					<thead>
						<tr>
							<th>Order</th>
							<th>Mesa</th>
							<th>Productos</th>
							<th>Estado</th>
						</tr>
					</thead>
					<tr th:each="order: ${orders}">
						<td th:text="${order.id}" /></td>
						<td>Mesa</td>
						<td>
							<table id="dataTable" class="table table-striped display">
								<thead>
									<tr>
										<th>Producto</th>
										<th>Cantidad</th>
										<th>Estado</th>
										<th>Siguiente estado</th>
										<th>Cancelar</th>
									</tr>
								</thead>
								<tr th:each="product: ${order.products}">
									<form method="put" action="/manageProductStatus">
									<td th:text="${product.key.name}"></td>
									<td th:text="${product.value}"></td>
									<td th:text="${product.key.state.state}"></td>
									<td>
									<span
										th:if="${product.key.state.state != T(es.restaurant.EatApp.models.ProductState.productState).SERVED and product.key.state.state != T(es.restaurant.EatApp.models.ProductState.productState).CANCELLED}">
											<form method="post" action="/manageProductStatus">
												<button formmethod="post" formaction="/manageProductStatus"
													type="submit" class="btn btn-success">Siguiente
													estado</button>
												<input type="hidden" name="userId"
													th:value="${order.userId}" /> <input type="hidden"
													name="productId" th:value="${product.key.id}" /> <input
													type="hidden" name=operation value="change" />
											</form>
									</span>
									</td>
									<td>
									<span
										th:if="${product.key.state.state != T(es.restaurant.EatApp.models.ProductState.productState).CANCELLED and product.key.state.state != T(es.restaurant.EatApp.models.ProductState.productState).SERVED}">
											<form method="post" action="/manageProductStatus">
												<button name="cancel" type="submit" class="btn btn-danger">Cancelar
													producto</button>
												<input type="hidden" name="userId"
													th:value="${order.userId}" /> <input type="hidden"
													name="productId" th:value="${product.key.id}" /> <input
													type="hidden" name="operation" value="cancel" />
											</form>
									</span>
									</td>
								</tr>
							</table>
						</td>
						<td th:text="${order.state.state}"></td>
					</tr>
				</table>
			</div>
		</main>
	</div>
	<footer th:insert="base/footer.html"> </footer>
	<footer th:insert="base/dataTables.html"> </footer>
</body>
</html>